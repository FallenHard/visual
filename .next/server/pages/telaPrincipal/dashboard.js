(()=>{var e={};e.id=239,e.ids=[239,660],e.modules={1323:(e,a)=>{"use strict";Object.defineProperty(a,"l",{enumerable:!0,get:function(){return function e(a,s){return s in a?a[s]:"then"in a&&"function"==typeof a.then?a.then(a=>e(a,s)):"function"==typeof a&&"default"===s?a:void 0}}})},2172:(e,a,s)=>{"use strict";s.r(a),s.d(a,{config:()=>j,default:()=>g,getServerSideProps:()=>x,getStaticPaths:()=>b,getStaticProps:()=>v,reportWebVitals:()=>f,routeModule:()=>I,unstable_getServerProps:()=>A,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>S,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>P});var t={};s.r(t),s.d(t,{default:()=>u});var o=s(7093),r=s(5244),i=s(1323),n=s(1682),l=s.n(n),c=s(8141),d=s.n(c),h=s(997),p=s(6689);let m=require("react-router-dom");function u(){let[e,a]=(0,p.useState)("novo"),[s,t]=(0,p.useState)([]),[o,r]=(0,p.useState)([]),[i,n]=(0,p.useState)([]),[l,c]=(0,p.useState)(""),d=(0,m.useNavigate)(),[u,g]=(0,p.useState)({servicoId:"",proprietarioId:"",dataHora:"",observacao:""}),[v,b]=(0,p.useState)(new Date),[x,j]=(0,p.useState)(""),f=async()=>{console.log("[v0] Iniciando carregamento de dados...");let e=localStorage.getItem("token");if(e)try{let a=JSON.parse(atob(e.split(".")[1]))["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]||"";c(a),console.log("[v0] User role:",a)}catch(e){console.log("[v0] Erro ao decodificar token:",e)}try{console.log("[v0] Buscando servi\xe7os em: http://localhost:5069/api/Servicos/todos");let e=await fetch("http://localhost:5069/api/Servicos/todos");if(console.log("[v0] Status da resposta de servi\xe7os:",e.status),e.ok){let a=await e.json();console.log("[v0] Servi\xe7os recebidos da API:",a),t(a)}else console.log("[v0] Resposta n\xe3o OK para servi\xe7os"),t([])}catch(e){console.log("[v0] Erro ao carregar servi\xe7os:",e.message),t([])}try{console.log("[v0] Buscando propriet\xe1rios em: http://localhost:5069/api/Proprietarios/todos");let e=await fetch("http://localhost:5069/api/Proprietarios/todos");if(console.log("[v0] Status da resposta de propriet\xe1rios:",e.status),e.ok){let a=await e.json();console.log("[v0] Propriet\xe1rios recebidos da API:",a),r(a)}else console.log("[v0] Resposta n\xe3o OK para propriet\xe1rios"),r([])}catch(e){console.log("[v0] Erro ao carregar barbeiros:",e.message),r([])}try{console.log("[v0] Buscando agendamentos em: http://localhost:5069/api/Agendamento/todos");let e=await fetch("http://localhost:5069/api/Agendamento/todos");if(console.log("[v0] Status da resposta de agendamentos:",e.status),e.ok){let a=await e.json();console.log("[v0] Agendamentos recebidos da API:",a),n(a)}}catch(e){console.log("[v0] Erro ao carregar agendamentos:",e.message)}},P=async e=>{e.preventDefault();let t=s.find(e=>e.id===u.servicoId);if(!t){alert("Por favor, selecione um servi\xe7o.");return}let o=`${v.toISOString().split("T")[0]}T${x}:00`,r={clienteId:1,proprietarioId:u.proprietarioId,servicoId:u.servicoId,dataHora:o,observacao:u.observacao||"",precoFinal:t.preco,confirmado:!1};try{let e=await fetch("http://localhost:5069/api/Agendamento/criar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(e.ok){let s=await e.json();alert(s.message||"Agendamento realizado com sucesso!"),g({servicoId:"",proprietarioId:"",dataHora:"",observacao:""}),j(""),f(),a("meus")}else{let a=await e.text();alert(`Erro ao realizar agendamento: ${a}`)}}catch(e){console.error("Erro ao criar agendamento:",e),alert("Erro ao realizar agendamento. Verifique se a API est\xe1 rodando.")}};return(0,h.jsxs)("div",{className:"dashboard-container",children:[(0,h.jsxs)("div",{className:"dashboard-header",children:[h.jsx("h1",{className:"dashboard-title",children:"Agendamentos"}),h.jsx("p",{className:"dashboard-subtitle",children:"Agende seu hor\xe1rio com os melhores profissionais"})]}),(0,h.jsxs)("div",{className:"dashboard-tabs",children:[h.jsx("button",{className:`tab-button ${"novo"===e?"active":""}`,onClick:()=>a("novo"),children:"Novo Agendamento"}),h.jsx("button",{className:`tab-button ${"meus"===e?"active":""}`,onClick:()=>a("meus"),children:"Meus Agendamentos"})]}),"novo"===e?h.jsx("div",{className:"dashboard-content",children:(0,h.jsxs)("div",{className:"booking-grid",children:[(0,h.jsxs)("div",{className:"booking-section",children:[h.jsx("h2",{className:"section-title",children:"Escolha o Servi\xe7o"}),0===s.length?h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"Nenhum servi\xe7o cadastrado. Verifique se a API est\xe1 rodando e se h\xe1 servi\xe7os no banco de dados."})}):h.jsx("div",{className:"services-grid",children:s.map(e=>(0,h.jsxs)("div",{className:`service-card ${u.servicoId===e.id?"selected":""}`,onClick:()=>g({...u,servicoId:e.id}),children:[h.jsx("h3",{children:e.nome}),(0,h.jsxs)("p",{className:"service-price",children:["R$ ",e.preco.toFixed(2)]})]},e.id))})]}),(0,h.jsxs)("div",{className:"booking-section",children:[h.jsx("h2",{className:"section-title",children:"Escolha o Barbeiro"}),0===o.length?h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"Nenhum barbeiro cadastrado. Verifique se a API est\xe1 rodando e se h\xe1 propriet\xe1rios no banco de dados."})}):h.jsx("div",{className:"barbers-grid",children:o.map(e=>(0,h.jsxs)("div",{className:`barber-card ${u.proprietarioId===e.id?"selected":""}`,onClick:()=>g({...u,proprietarioId:e.id}),children:[h.jsx("div",{className:"barber-avatar",children:e.nome.charAt(0)}),h.jsx("h3",{children:e.nome})]},e.id))})]}),(0,h.jsxs)("div",{className:"booking-section",children:[h.jsx("h2",{className:"section-title",children:"Escolha a Data"}),(()=>{let e=new Date,a=new Date(v.getFullYear(),v.getMonth(),1),s=new Date(v.getFullYear(),v.getMonth()+1,0),t=[],o=a.getDay();for(let e=0;e<o;e++)t.push(h.jsx("div",{className:"calendar-day empty"},`empty-${e}`));for(let a=1;a<=s.getDate();a++){let s=new Date(v.getFullYear(),v.getMonth(),a),o=s.toDateString()===v.toDateString(),r=s<e.setHours(0,0,0,0);t.push(h.jsx("div",{className:`calendar-day ${o?"selected":""} ${r?"past":""}`,onClick:()=>!r&&b(s),children:a},a))}return(0,h.jsxs)("div",{className:"calendar-container",children:[(0,h.jsxs)("div",{className:"calendar-header",children:[h.jsx("button",{onClick:()=>b(new Date(v.getFullYear(),v.getMonth()-1)),className:"calendar-nav",children:"←"}),h.jsx("h3",{children:v.toLocaleDateString("pt-BR",{month:"long",year:"numeric"})}),h.jsx("button",{onClick:()=>b(new Date(v.getFullYear(),v.getMonth()+1)),className:"calendar-nav",children:"→"})]}),h.jsx("div",{className:"calendar-weekdays",children:["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"].map(e=>h.jsx("div",{className:"weekday",children:e},e))}),h.jsx("div",{className:"calendar-grid",children:t})]})})()]}),(0,h.jsxs)("div",{className:"booking-section",children:[h.jsx("h2",{className:"section-title",children:"Escolha o Hor\xe1rio"}),h.jsx("div",{className:"time-grid",children:["09:00","09:30","10:00","10:30","11:00","11:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"].map(e=>h.jsx("button",{className:`time-slot ${x===e?"selected":""}`,onClick:()=>j(e),children:e},e))})]}),(0,h.jsxs)("div",{className:"booking-section full-width",children:[h.jsx("h2",{className:"section-title",children:"Observa\xe7\xf5es (Opcional)"}),h.jsx("textarea",{className:"barber-textarea",placeholder:"Alguma prefer\xeancia ou observa\xe7\xe3o?",value:u.observacao,onChange:e=>g({...u,observacao:e.target.value}),rows:"4"})]}),h.jsx("div",{className:"booking-section full-width",children:h.jsx("button",{className:"barber-button",onClick:P,disabled:!u.servicoId||!u.proprietarioId||!x,children:"Confirmar Agendamento"})})]})}):h.jsx("div",{className:"dashboard-content",children:h.jsx("div",{className:"appointments-list",children:0===i.length?h.jsx("div",{className:"empty-state",children:h.jsx("p",{children:"Voc\xea ainda n\xe3o tem agendamentos."})}):i.map(e=>(0,h.jsxs)("div",{className:"appointment-card",children:[(0,h.jsxs)("div",{className:"appointment-header",children:[h.jsx("h3",{children:e.servico?.nome||"Servi\xe7o"}),h.jsx("span",{className:`status-badge ${e.confirmado?"confirmed":"pending"}`,children:e.confirmado?"Confirmado":"Pendente"})]}),(0,h.jsxs)("div",{className:"appointment-details",children:[(0,h.jsxs)("p",{children:[h.jsx("strong",{children:"Barbeiro:"})," ",e.proprietario?.nome||"N/A"]}),(0,h.jsxs)("p",{children:[h.jsx("strong",{children:"Data/Hora:"})," ",new Date(e.dataHora).toLocaleString("pt-BR")]}),(0,h.jsxs)("p",{children:[h.jsx("strong",{children:"Pre\xe7o:"})," R$ ",e.precoFinal?.toFixed(2)||"0.00"]}),e.observacao&&(0,h.jsxs)("p",{children:[h.jsx("strong",{children:"Observa\xe7\xe3o:"})," ",e.observacao]})]})]},e.id))})}),"Proprietario"===l&&(0,h.jsxs)("button",{className:"admin-button",onClick:()=>{console.log("[v0] Admin button clicked, navigating to /admin/agendamentos"),d("/admin/agendamentos")},children:[h.jsx("span",{children:"\uD83D\uDC64"}),h.jsx("span",{children:"Painel Admin"})]})]})}s(3644),s(117);let g=(0,i.l)(t,"default"),v=(0,i.l)(t,"getStaticProps"),b=(0,i.l)(t,"getStaticPaths"),x=(0,i.l)(t,"getServerSideProps"),j=(0,i.l)(t,"config"),f=(0,i.l)(t,"reportWebVitals"),P=(0,i.l)(t,"unstable_getStaticProps"),N=(0,i.l)(t,"unstable_getStaticPaths"),S=(0,i.l)(t,"unstable_getStaticParams"),A=(0,i.l)(t,"unstable_getServerProps"),y=(0,i.l)(t,"unstable_getServerSideProps"),I=new o.PagesRouteModule({definition:{kind:r.x.PAGES,page:"/telaPrincipal/dashboard",pathname:"/telaPrincipal/dashboard",bundlePath:"",filename:""},components:{App:d(),Document:l()},userland:t})},8141:(e,a,s)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return l}});let t=s(167),o=s(997),r=t._(s(6689)),i=s(5782);async function n(e){let{Component:a,ctx:s}=e;return{pageProps:await (0,i.loadGetInitialProps)(a,s)}}class l extends r.default.Component{render(){let{Component:e,pageProps:a}=this.props;return(0,o.jsx)(e,{...a})}}l.origGetInitialProps=n,l.getInitialProps=n,("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},3644:()=>{},117:()=>{},5244:(e,a)=>{"use strict";var s;Object.defineProperty(a,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},5315:e=>{"use strict";e.exports=require("path")}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[682],()=>s(2172));module.exports=t})();