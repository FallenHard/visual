(()=>{var e={};e.id=698,e.ids=[698],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2096:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(4292),s(8295),s(5866);var t=s(3191),n=s(8716),l=s(7922),i=s.n(l),r=s(5231),o={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>r[e]);s.d(a,o);let d=["",{children:["admin",{children:["agendamentos",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4292)),"D:\\visual\\src\\app\\admin\\agendamentos\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8295)),"D:\\visual\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\visual\\src\\app\\admin\\agendamentos\\page.jsx"],m="/admin/agendamentos/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/admin/agendamentos/page",pathname:"/admin/agendamentos",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7386:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},2777:(e,a,s)=>{Promise.resolve().then(s.bind(s,9793))},810:()=>{},5047:(e,a,s)=>{"use strict";var t=s(7389);s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},9793:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i});var t=s(326),n=s(7577),l=s(5047);function i(){var e;let[a,s]=(0,n.useState)([]),[i,r]=(0,n.useState)(!0),[o,d]=(0,n.useState)("todos"),[c,m]=(0,n.useState)(null),[h,u]=(0,n.useState)(null),[x,p]=(0,n.useState)(""),[j,v]=(0,n.useState)(""),N=(0,l.useRouter)(),g=async()=>{let e=localStorage.getItem("token");if(!e){alert("Voc\xea precisa estar logado para acessar o painel administrativo."),N.push("/login");return}try{let a=await fetch("https://localhost:7037/api/Agendamento/todos-admin",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json();s(e)}else console.error("Erro ao buscar agendamentos")}catch(e){console.error("Erro ao buscar agendamentos:",e)}finally{r(!1)}},b=async()=>{if(!c)return;let e=localStorage.getItem("token");try{let a=await fetch(`https://localhost:7037/api/Agendamento/concluir/${c.id}`,{method:"PUT",headers:{Authorization:`Bearer ${e}`}});if(a.ok)m(null),g();else{let e=await a.text();console.error("Erro ao concluir agendamento:",e)}}catch(e){console.error("Erro ao concluir agendamento:",e)}},f=async()=>{if(!h)return;let e=localStorage.getItem("token");try{let a=await fetch(`https://localhost:7037/api/Agendamento/${h.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});if(a.ok)u(null),g();else{let e=await a.text();console.error("Erro ao excluir agendamento:",e)}}catch(e){console.error("Erro ao excluir agendamento:",e)}},P=(e=a.filter(e=>"todos"===o||("pendente"===o?!e.confirmado:"confirmado"!==o||e.confirmado)),x||j?e.filter(e=>{let a=new Date(e.dataHora),s=x?new Date(x):null,t=j?new Date(j):null;return(!s||!(a<s))&&(!t||!(a>t))}):e),C={total:a.length,confirmados:a.filter(e=>e.confirmado).length,pendentes:a.filter(e=>!e.confirmado).length,receita:a.reduce((e,a)=>e+(a.precoFinal||0),0)},D=e=>new Date(e).toLocaleDateString("pt-BR"),k=e=>new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return(0,t.jsxs)("div",{className:"admin-container",children:[(0,t.jsxs)("header",{className:"admin-header",children:[t.jsx("button",{className:"admin-back-btn",onClick:()=>N.push("/dashboard"),children:"← Voltar"}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"admin-title",children:"Painel Administrativo"}),t.jsx("p",{className:"admin-subtitle",children:"Gerencie todos os agendamentos da barbearia"})]})]}),(0,t.jsxs)("div",{className:"admin-stats",children:[(0,t.jsxs)("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-icon",children:"\uD83D\uDCC5"}),(0,t.jsxs)("div",{className:"stat-info",children:[t.jsx("p",{className:"stat-label",children:"Total"}),t.jsx("p",{className:"stat-value",children:C.total})]})]}),(0,t.jsxs)("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-icon",children:"✅"}),(0,t.jsxs)("div",{className:"stat-info",children:[t.jsx("p",{className:"stat-label",children:"Confirmados"}),t.jsx("p",{className:"stat-value",children:C.confirmados})]})]}),(0,t.jsxs)("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-icon",children:"⏳"}),(0,t.jsxs)("div",{className:"stat-info",children:[t.jsx("p",{className:"stat-label",children:"Pendentes"}),t.jsx("p",{className:"stat-value",children:C.pendentes})]})]}),(0,t.jsxs)("div",{className:"stat-card",children:[t.jsx("div",{className:"stat-icon",children:"\uD83D\uDCB0"}),(0,t.jsxs)("div",{className:"stat-info",children:[t.jsx("p",{className:"stat-label",children:"Receita"}),(0,t.jsxs)("p",{className:"stat-value",children:["R$ ",C.receita.toFixed(2)]})]})]})]}),(0,t.jsxs)("div",{className:"admin-filters",children:[(0,t.jsxs)("button",{className:`filter-btn ${"todos"===o?"active":""}`,onClick:()=>d("todos"),children:["Todos (",C.total,")"]}),(0,t.jsxs)("button",{className:`filter-btn ${"pendente"===o?"active":""}`,onClick:()=>d("pendente"),children:["Pendentes (",C.pendentes,")"]}),(0,t.jsxs)("button",{className:`filter-btn ${"confirmado"===o?"active":""}`,onClick:()=>d("confirmado"),children:["Confirmados (",C.confirmados,")"]}),(0,t.jsxs)("div",{className:"date-filter",children:[t.jsx("input",{type:"date",value:x,onChange:e=>p(e.target.value)}),t.jsx("span",{children:"at\xe9"}),t.jsx("input",{type:"date",value:j,onChange:e=>v(e.target.value)})]})]}),i?t.jsx("div",{className:"admin-loading",children:"Carregando agendamentos..."}):0===P.length?t.jsx("div",{className:"admin-empty",children:"Nenhum agendamento encontrado"}):t.jsx("div",{className:"admin-appointments",children:P.map(e=>(0,t.jsxs)("div",{className:"appointment-card",children:[(0,t.jsxs)("div",{className:"appointment-header",children:[t.jsx("h3",{className:"appointment-service",children:e.servico?.nome||"Servi\xe7o"}),t.jsx("span",{className:`appointment-status ${e.confirmado?"status-confirmado":"status-pendente"}`,children:e.confirmado?"Confirmado":"Pendente"})]}),(0,t.jsxs)("div",{className:"appointment-details",children:[(0,t.jsxs)("div",{className:"detail-row",children:[t.jsx("span",{className:"detail-label",children:"Cliente:"}),t.jsx("span",{className:"detail-value",children:e.cliente?.nome||"N/A"})]}),(0,t.jsxs)("div",{className:"detail-row",children:[t.jsx("span",{className:"detail-label",children:"Barbeiro:"}),t.jsx("span",{className:"detail-value",children:e.proprietario?.nome||"N/A"})]}),(0,t.jsxs)("div",{className:"detail-row",children:[t.jsx("span",{className:"detail-label",children:"Data:"}),t.jsx("span",{className:"detail-value",children:D(e.dataHora)})]}),(0,t.jsxs)("div",{className:"detail-row",children:[t.jsx("span",{className:"detail-label",children:"Hor\xe1rio:"}),t.jsx("span",{className:"detail-value",children:k(e.dataHora)})]}),(0,t.jsxs)("div",{className:"detail-row",children:[t.jsx("span",{className:"detail-label",children:"Pre\xe7o:"}),(0,t.jsxs)("span",{className:"detail-value price",children:["R$ ",(e.precoFinal||0).toFixed(2)]})]}),e.observacao&&(0,t.jsxs)("div",{className:"detail-row",children:[t.jsx("span",{className:"detail-label",children:"Obs:"}),t.jsx("span",{className:"detail-value",children:e.observacao})]}),(0,t.jsxs)("div",{className:"button-group",children:[!e.confirmado&&t.jsx("button",{className:"concluir-btn",onClick:()=>m(e),children:"✅ Concluir"}),(0,t.jsxs)("button",{className:"excluir-btn",onClick:()=>u(e),children:[t.jsx("span",{children:"\uD83D\uDDD1️"})," Excluir"]})]})]})]},e.id))}),c&&t.jsx("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-box",children:[t.jsx("h3",{children:"Concluir Agendamento"}),(0,t.jsxs)("p",{children:["Deseja realmente marcar o agendamento de ",t.jsx("strong",{children:c.cliente?.nome})," como conclu\xeddo?"]}),(0,t.jsxs)("div",{className:"modal-actions",children:[t.jsx("button",{className:"cancelar-btn",onClick:()=>m(null),children:"Cancelar"}),t.jsx("button",{className:"confirmar-btn",onClick:b,children:"Confirmar"})]})]})}),h&&t.jsx("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal-box",children:[t.jsx("h3",{children:"Excluir Agendamento"}),(0,t.jsxs)("p",{children:["Tem certeza que deseja ",t.jsx("strong",{children:"excluir"})," o agendamento de"," ",t.jsx("strong",{children:h.cliente?.nome}),"?"]}),(0,t.jsxs)("div",{className:"modal-actions",children:[t.jsx("button",{className:"cancelar-btn",onClick:()=>u(null),children:"Cancelar"}),t.jsx("button",{className:"confirmar-btn",onClick:f,children:"Excluir"})]})]})})]})}s(1271)},4292:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`D:\visual\src\app\admin\agendamentos\page.jsx#default`)},8295:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>l,metadata:()=>n});var t=s(9510);s(8903);let n={title:"Barbearia Premium",description:"Sistema de agendamento"};function l({children:e}){return t.jsx("html",{lang:"pt-BR",children:t.jsx("body",{children:e})})}},1271:()=>{},8903:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[819],()=>s(2096));module.exports=t})();