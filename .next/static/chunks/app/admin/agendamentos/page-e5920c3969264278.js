(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{7374:function(e,a,s){Promise.resolve().then(s.bind(s,6542))},9376:function(e,a,s){"use strict";var n=s(5475);s.o(n,"useRouter")&&s.d(a,{useRouter:function(){return n.useRouter}})},6542:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return i}});var n=s(7437),t=s(2265),l=s(9376);function i(){var e,a,s;let[i,c]=(0,t.useState)([]),[o,r]=(0,t.useState)(!0),[d,m]=(0,t.useState)("todos"),[h,u]=(0,t.useState)(null),[x,j]=(0,t.useState)(null),[v,N]=(0,t.useState)(""),[p,f]=(0,t.useState)(""),b=(0,l.useRouter)();(0,t.useEffect)(()=>{g()},[]);let g=async()=>{let e=localStorage.getItem("token");if(!e){alert("Voc\xea precisa estar logado para acessar o painel administrativo."),b.push("/login");return}try{let a=await fetch("https://localhost:7037/api/Agendamento/todos-admin",{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();c(e)}else console.error("Erro ao buscar agendamentos")}catch(e){console.error("Erro ao buscar agendamentos:",e)}finally{r(!1)}},C=async()=>{if(!h)return;let e=localStorage.getItem("token");try{let a=await fetch("https://localhost:7037/api/Agendamento/concluir/".concat(h.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e)}});if(a.ok)u(null),g();else{let e=await a.text();console.error("Erro ao concluir agendamento:",e)}}catch(e){console.error("Erro ao concluir agendamento:",e)}},k=async()=>{if(!x)return;let e=localStorage.getItem("token");try{let a=await fetch("https://localhost:7037/api/Agendamento/".concat(x.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(a.ok)j(null),g();else{let e=await a.text();console.error("Erro ao excluir agendamento:",e)}}catch(e){console.error("Erro ao excluir agendamento:",e)}},D=(s=i.filter(e=>"todos"===d||("pendente"===d?!e.confirmado:"confirmado"!==d||e.confirmado)),v||p?s.filter(e=>{let a=new Date(e.dataHora),s=v?new Date(v):null,n=p?new Date(p):null;return(!s||!(a<s))&&(!n||!(a>n))}):s),w={total:i.length,confirmados:i.filter(e=>e.confirmado).length,pendentes:i.filter(e=>!e.confirmado).length,receita:i.reduce((e,a)=>e+(a.precoFinal||0),0)},E=e=>new Date(e).toLocaleDateString("pt-BR"),S=e=>new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return(0,n.jsxs)("div",{className:"admin-container",children:[(0,n.jsxs)("header",{className:"admin-header",children:[(0,n.jsx)("button",{className:"admin-back-btn",onClick:()=>b.push("/dashboard"),children:"← Voltar"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"admin-title",children:"Painel Administrativo"}),(0,n.jsx)("p",{className:"admin-subtitle",children:"Gerencie todos os agendamentos da barbearia"})]})]}),(0,n.jsxs)("div",{className:"admin-stats",children:[(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:"\uD83D\uDCC5"}),(0,n.jsxs)("div",{className:"stat-info",children:[(0,n.jsx)("p",{className:"stat-label",children:"Total"}),(0,n.jsx)("p",{className:"stat-value",children:w.total})]})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:"✅"}),(0,n.jsxs)("div",{className:"stat-info",children:[(0,n.jsx)("p",{className:"stat-label",children:"Confirmados"}),(0,n.jsx)("p",{className:"stat-value",children:w.confirmados})]})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:"⏳"}),(0,n.jsxs)("div",{className:"stat-info",children:[(0,n.jsx)("p",{className:"stat-label",children:"Pendentes"}),(0,n.jsx)("p",{className:"stat-value",children:w.pendentes})]})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:"\uD83D\uDCB0"}),(0,n.jsxs)("div",{className:"stat-info",children:[(0,n.jsx)("p",{className:"stat-label",children:"Receita"}),(0,n.jsxs)("p",{className:"stat-value",children:["R$ ",w.receita.toFixed(2)]})]})]})]}),(0,n.jsxs)("div",{className:"admin-filters",children:[(0,n.jsxs)("button",{className:"filter-btn ".concat("todos"===d?"active":""),onClick:()=>m("todos"),children:["Todos (",w.total,")"]}),(0,n.jsxs)("button",{className:"filter-btn ".concat("pendente"===d?"active":""),onClick:()=>m("pendente"),children:["Pendentes (",w.pendentes,")"]}),(0,n.jsxs)("button",{className:"filter-btn ".concat("confirmado"===d?"active":""),onClick:()=>m("confirmado"),children:["Confirmados (",w.confirmados,")"]}),(0,n.jsxs)("div",{className:"date-filter",children:[(0,n.jsx)("input",{type:"date",value:v,onChange:e=>N(e.target.value)}),(0,n.jsx)("span",{children:"at\xe9"}),(0,n.jsx)("input",{type:"date",value:p,onChange:e=>f(e.target.value)})]})]}),o?(0,n.jsx)("div",{className:"admin-loading",children:"Carregando agendamentos..."}):0===D.length?(0,n.jsx)("div",{className:"admin-empty",children:"Nenhum agendamento encontrado"}):(0,n.jsx)("div",{className:"admin-appointments",children:D.map(e=>{var a,s,t;return(0,n.jsxs)("div",{className:"appointment-card",children:[(0,n.jsxs)("div",{className:"appointment-header",children:[(0,n.jsx)("h3",{className:"appointment-service",children:(null===(a=e.servico)||void 0===a?void 0:a.nome)||"Servi\xe7o"}),(0,n.jsx)("span",{className:"appointment-status ".concat(e.confirmado?"status-confirmado":"status-pendente"),children:e.confirmado?"Confirmado":"Pendente"})]}),(0,n.jsxs)("div",{className:"appointment-details",children:[(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"detail-label",children:"Cliente:"}),(0,n.jsx)("span",{className:"detail-value",children:(null===(s=e.cliente)||void 0===s?void 0:s.nome)||"N/A"})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"detail-label",children:"Barbeiro:"}),(0,n.jsx)("span",{className:"detail-value",children:(null===(t=e.proprietario)||void 0===t?void 0:t.nome)||"N/A"})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"detail-label",children:"Data:"}),(0,n.jsx)("span",{className:"detail-value",children:E(e.dataHora)})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"detail-label",children:"Hor\xe1rio:"}),(0,n.jsx)("span",{className:"detail-value",children:S(e.dataHora)})]}),(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"detail-label",children:"Pre\xe7o:"}),(0,n.jsxs)("span",{className:"detail-value price",children:["R$ ",(e.precoFinal||0).toFixed(2)]})]}),e.observacao&&(0,n.jsxs)("div",{className:"detail-row",children:[(0,n.jsx)("span",{className:"detail-label",children:"Obs:"}),(0,n.jsx)("span",{className:"detail-value",children:e.observacao})]}),(0,n.jsxs)("div",{className:"button-group",children:[!e.confirmado&&(0,n.jsx)("button",{className:"concluir-btn",onClick:()=>u(e),children:"✅ Concluir"}),(0,n.jsxs)("button",{className:"excluir-btn",onClick:()=>j(e),children:[(0,n.jsx)("span",{children:"\uD83D\uDDD1️"})," Excluir"]})]})]})]},e.id)})}),h&&(0,n.jsx)("div",{className:"modal-overlay",children:(0,n.jsxs)("div",{className:"modal-box",children:[(0,n.jsx)("h3",{children:"Concluir Agendamento"}),(0,n.jsxs)("p",{children:["Deseja realmente marcar o agendamento de ",(0,n.jsx)("strong",{children:null===(e=h.cliente)||void 0===e?void 0:e.nome})," como conclu\xeddo?"]}),(0,n.jsxs)("div",{className:"modal-actions",children:[(0,n.jsx)("button",{className:"cancelar-btn",onClick:()=>u(null),children:"Cancelar"}),(0,n.jsx)("button",{className:"confirmar-btn",onClick:C,children:"Confirmar"})]})]})}),x&&(0,n.jsx)("div",{className:"modal-overlay",children:(0,n.jsxs)("div",{className:"modal-box",children:[(0,n.jsx)("h3",{children:"Excluir Agendamento"}),(0,n.jsxs)("p",{children:["Tem certeza que deseja ",(0,n.jsx)("strong",{children:"excluir"})," o agendamento de"," ",(0,n.jsx)("strong",{children:null===(a=x.cliente)||void 0===a?void 0:a.nome}),"?"]}),(0,n.jsxs)("div",{className:"modal-actions",children:[(0,n.jsx)("button",{className:"cancelar-btn",onClick:()=>j(null),children:"Cancelar"}),(0,n.jsx)("button",{className:"confirmar-btn",onClick:k,children:"Excluir"})]})]})})]})}s(9473)},9473:function(){}},function(e){e.O(0,[457,971,117,744],function(){return e(e.s=7374)}),_N_E=e.O()}]);